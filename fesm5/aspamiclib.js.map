{"version":3,"file":"aspamiclib.js.map","sources":["ng://aspamiclib/mic/mic.component.ts","ng://aspamiclib/lib.module.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nvar Speech = require('watson-html5-speech-recognition');\nvar speech = new Speech.SpeechToText({\n  watsonTokenUrl: `/api/speech-to-text/`\n});\nvar activeSTT;\n\n@Component({\n  selector: 'aspamic',\n  template: `<a (click)=\"startListening()\" class=\"micSize\" [style.background]=\"'url(' + imageSrc + ')'\" style=\"cursor: pointer;\" title=\"Listen\"> </a>`,\n  styleUrls: ['./mic.component.scss']\n})\nexport class MicComponent {\n\n  @Input() apiURL: string = '';\n  @Input() imageSrc: string = '';\n  @Output() micResult: EventEmitter<any> = new EventEmitter<any>();\n\n  startListening() {\n    if (activeSTT) {\n      // do nothing, speech is active\n    } else if (speech.isSupported) {\n      this.listen();\n    } else {\n      alert('speech not supported by this browser');\n    }\n  }\n\n  stopListening(finalText) {\n    console.log('stop');\n    console.log(finalText);\n    if (activeSTT) {\n      activeSTT.stop();\n      activeSTT = null;\n    }\n  }\n  listen() {\n    var that = this;\n    activeSTT = speech.listen({\n      onStart: function () {\n        console.log('starting');\n      },\n      onResult: function (e) {\n        console.log(e.text);\n        // document.getElementById(\"recognizedText\").innerHTML = e.text;\n        if (e.isFinal) {\n          that.micResult.emit(e.text);\n          that.stopListening(e.text);\n        }\n      },\n      onError: function (e) {\n        console.log('error', e);\n      },\n      onEnd: function (e) {\n        console.log('end', e);\n      }\n    });\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MicComponent } from './mic/mic.component';\n// import { BarService } from './bar/bar.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    MicComponent\n  ],\n  exports: [\n    MicComponent\n  ]\n})\nexport class AspaMicModule {\n\n  public static forRoot(): ModuleWithProviders {\n\n    return {\n      ngModule: AspaMicModule,\n      providers: [\n        // BarService\n      ]\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;AAAA;IAEI,MAAM,GAAG,OAAO,CAAC,iCAAiC,CAAC;;IACnD,MAAM,GAAG,IAAI,MAAM,CAAC,YAAY,CAAC;IACnC,cAAc,EAAE,sBAAsB;CACvC,CAAC;;IACE,SAAS;AAEb;IAAA;QAOW,WAAM,GAAW,EAAE,CAAC;QACpB,aAAQ,GAAW,EAAE,CAAC;QACrB,cAAS,GAAsB,IAAI,YAAY,EAAO,CAAC;KA2ClE;;;;IAzCC,qCAAc;;;IAAd;QACE,IAAI,SAAS,EAAE,CAEd;aAAM,IAAI,MAAM,CAAC,WAAW,EAAE;YAC7B,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;aAAM;YACL,KAAK,CAAC,sCAAsC,CAAC,CAAC;SAC/C;KACF;;;;;IAED,oCAAa;;;;IAAb,UAAc,SAAS;QACrB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACpB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvB,IAAI,SAAS,EAAE;YACb,SAAS,CAAC,IAAI,EAAE,CAAC;YACjB,SAAS,GAAG,IAAI,CAAC;SAClB;KACF;;;;IACD,6BAAM;;;IAAN;;YACM,IAAI,GAAG,IAAI;QACf,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC;YACxB,OAAO;;;YAAE;gBACP,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;aACzB,CAAA;YACD,QAAQ;;;;YAAE,UAAU,CAAC;gBACnB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;;gBAEpB,IAAI,CAAC,CAAC,OAAO,EAAE;oBACb,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;oBAC5B,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;iBAC5B;aACF,CAAA;YACD,OAAO;;;;YAAE,UAAU,CAAC;gBAClB,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;aACzB,CAAA;YACD,KAAK;;;;YAAE,UAAU,CAAC;gBAChB,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACvB,CAAA;SACF,CAAC,CAAC;KACJ;;gBAlDF,SAAS,SAAC;oBACT,QAAQ,EAAE,SAAS;oBACnB,QAAQ,EAAE,oJAA0I;;iBAErJ;;;yBAGE,KAAK;2BACL,KAAK;4BACL,MAAM;;IA2CT,mBAAC;CApDD;;;;;;ACRA;AAKA;IAAA;KAsBC;;;;IATe,qBAAO;;;IAArB;QAEE,OAAO;YACL,QAAQ,EAAE,aAAa;YACvB,SAAS,EAAE;;aAEV;SACF,CAAC;KACH;;gBArBF,QAAQ,SAAC;oBACR,OAAO,EAAE;wBACP,YAAY;qBACb;oBACD,YAAY,EAAE;wBACZ,YAAY;qBACb;oBACD,OAAO,EAAE;wBACP,YAAY;qBACb;iBACF;;IAYD,oBAAC;CAtBD;;;;;;;;;;;;;;"}
